<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">


<struts>
	<constant name="struts.objectFactory.spring.autoWire" value="type" />
	<constant name="struts.ui.theme" value="simple" />
	<constant name="struts.multipart.maxSize" value="10000000" />



	<package name="default" namespace="/" extends="struts-default">

		<!-- <interceptors> -->
		<!-- <interceptor name="Authorizeuser" class="interceptors.AlreadyLogInterceptor"></interceptor> -->



		<!-- <interceptor-stack name="myStack"> -->
		<!-- <interceptor-ref name="defaultStack" /> -->
		<!-- <interceptor-ref name="Authorizeuser" /> -->

		<!-- </interceptor-stack> -->
		<!-- </interceptors> -->

		<!-- <default-interceptor-ref name="myStack" /> -->
		<global-results>
			<result name="login" type="redirect">index</result>
		</global-results>

		<action name="" class="actions.IndexAction" method="execute">
			<result name="success">/pages/index/index.jsp</result>
			<result name="input">/pages/index/index.jsp</result>
			<result name="error">/pages/error/error.jsp</result>
		</action>

		<action name="loadDB" class="util.DBLoaderAction" method="loadDB">
			<result name="success">/pages/error/loaded.jsp</result>
			<result name="input">/pages/index/index.jsp</result>
			<result name="error">/pages/error/error.jsp</result>
		</action>

		<action name="index" class="actions.IndexAction" method="execute">
			<result name="success">/pages/index/index.jsp</result>
			<result name="input">/pages/index/index.jsp</result>
			<result name="error">/pages/error/error.jsp</result>
		</action>

		<action name="login" class="actions.LoginAction" method="showLogin">
			<interceptor-ref name="validation">
				<param name="excludeMethods">showLogin</param>
			</interceptor-ref>
			<result name="success">/pages/login/loginForm.jsp</result>
			<result name="input">/pages/login/loginForm.jsp</result>
			<result name="error">/pages/error/error.jsp</result>
			<result name="logged" type="redirect">index</result>
		</action>

		<action name="register" class="actions.RegisterAction">
			<result name="success" type="redirect">index</result>
			<result name="input">/pages/register/registerForm.jsp</result>
			<result name="error">/pages/error/error.jsp</result>
		</action>

		<action name="logout" method="logout" class="actions.LoginAction">
			<interceptor-ref name="validation">
				<param name="excludeMethods">logout</param>
			</interceptor-ref>
			<result name="error">/pages/error/error.jsp</result>
			<result name="success">/pages/index/index.jsp</result>
			<result name="input">/pages/login/loginForm.jsp</result>
		</action>







		<action name="ImageAction" class="actions.ImageAction">
			<result name="success" type="stream">
				<param name="contentType">image/jpeg</param>
				<param name="inputName">imageStream</param>
<!-- 				<param name="bufferSize">1024</param> -->
			</result>
		</action>




	</package>

	<package name="login" namespace="/login" extends="struts-default">
		<action name="autenticar" method="autenticarUsuario" class="actions.LoginAction">
			<result name="error">/pages/error/error.jsp</result>
			<result name="success" type="redirect">/index</result>
			<result name="input">/pages/login/loginForm.jsp</result>
		</action>

	</package>

	<!-- <package name="register" namespace="/register" extends="struts-default"> -->
	<!-- <action name="register" class="actions.RegisterAction"> -->
	<!-- <result name="error">/pages/error/error.jsp</result> -->
	<!-- <result name="success" type="redirect">index</result> -->
	<!-- <result name="input">/pages/register/registerForm.jsp</result> -->
	<!-- </action> -->
	<!-- </package> -->

	<package name="recorridos" namespace="/recorridos" extends="struts-default">
		<action name="recorridos" class="actions.AdministradorRecorridoAction">
			<result name="success">/pages/recorridos/listarRecorridos.jsp</result>
		</action>
	</package>

	<package name="eventos" namespace="/eventos" extends="struts-default">
		<action name="listarEventos" method="listarEventos"
			class="actions.AdministradorEventoAction">
			<result name="success">/pages/eventos/listarEventos.jsp</result>
		</action>
		<action name="crearEvento" method="crearEvento"
			class="actions.AdministradorEventoAction">
			<result name="success">/pages/eventos/crearEvento.jsp</result>
			<result name="restricted" type="redirect">/index</result>
		</action>
		<action name="register" method="registrarEvento"
			class="actions.AdministradorEventoAction">
			<!-- <interceptor-ref name="fileUpload"> -->
			<!-- <param name="allowedTypes">image/jpeg,image/gif</param> -->
			<!-- </interceptor-ref> -->
			<result name="success" type="redirect">listarEventos</result>
			<result name="input">/pages/eventos/crearEvento.jsp</result>
			<result name="restricted" type="redirect">/index</result>
		</action>
	</package>



</struts>